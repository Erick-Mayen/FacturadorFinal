<body>
    <section>
        <div class="form-box">
            <div class="form-value">
                <h2>Ingresar Producto</h2>
                <form id="userForm" action="<?= site_url('ProductoController/nuevoProducto') ?>" method="post" onsubmit="return validateForm()">
                    <div class="inputbox">
                        <i class="fa-solid fa-pen-to-square"></i>
                        <input type="text" id="editProducto" name="editProducto" required>
                        <label for="editProducto">nombre de Producto</label>
                    </div>
                    <div class="inputbox">
                        <i class="fa-solid fa-circle-plus"></i>
                        <input type="text" id="editExistencia" name="editExistencia" required>
                        <label for="editExistencia">Cantidad</label>
                    </div>
                    <div class="rol-select">
                        <div class="row-select">
                            <i class="fa-solid fa-caret-down"></i>
                        </div>
                        <i id= "icon-select" class="fa-solid fa-tags"></i>
                        <select id="editCategoria" name="editCategoria" required>
                            <option selected disabled>seleccione una categoria</option>
                            <?php foreach ($categorias as $categoria): ?>
                            <option value="<?php echo $categoria['id_categoria']; ?>"><?php echo $categoria['categoria']; ?></option>
                            <?php endforeach; ?>
                        </select>
                    </div>
                    <button type="submit">Ingresar</button>
                </form>
            </div>
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.20/dist/sweetalert2.all.min.js"></script>
    <script>
        function validateForm() {
            const categoriaSelect = document.getElementById("editCategoria");
            const selectedCategoria = categoriaSelect.value;

            if (selectedCategoria === "seleccione una categoria") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Por favor, seleccione una categoria antes de enviar.',
                });
                return false;
            }

            return true;
        }
    </script>
    <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"crossorigin="anonymous">
    </script>
</body>